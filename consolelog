objdump -S initcode.o > initcode.asm
ld -m    elf_i386 -T kernel.ld -o kernel entry.o bio.o console.o exec.o file.o fs.o ide.o ioapic.o kalloc.o kbd.o lapic.o log.o main.o mp.o picirq.o pipe.o proc.o sleeplock.o spinlock.o string.o swtch.o syscall.o sysfile.o sysproc.o trapasm.o trap.o uart.o vectors.o vm.o  -b binary initcode entryother
objdump -S kernel > kernel.asm
objdump -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > kernel.sym
dd if=/dev/zero of=xv6.img count=10000
10000+0 records in
10000+0 records out
5120000 bytes (5.1 MB, 4.9 MiB) copied, 0.0402709 s, 127 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes copied, 0.000121087 s, 4.2 MB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
415+1 records in
415+1 records out
212740 bytes (213 kB, 208 KiB) copied, 0.00102785 s, 207 MB/s
qemu-system-i386 -serial mon:stdio -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting 1
kalloc.c: kallocWithRef: create first ref to pa 0xdfbd000, currnet ref number = 1
cpu0: starting 0
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
kalloc.c: kallocWithRef: create first ref to pa 0xdf7a000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf78000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf77000, currnet ref number = 1
kalloc.c: kDecRef: decreased pa 0xdfbd000, currnet ref number = -1
init: starting sh
kalloc.c: kallocWithRef: create first ref to pa 0xdf31000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf2f000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf2e000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf2d000, currnet ref number = 1
kalloc.c: kDecRef: decreased pa 0xdf76000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf74000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf73000, currnet ref number = -1
$ cowtest
kalloc.c: kallocWithRef: create first ref to pa 0xdf27000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf26000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf25000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf24000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf23000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf22000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf21000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdf20000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdede000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdedc000, currnet ref number = 1
kalloc.c: kallocWithRef: create first ref to pa 0xdedb000, currnet ref number = 1
kalloc.c: kDecRef: decreased pa 0xdf2c000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf2a000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf29000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf28000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf27000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf26000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf25000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf24000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf23000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf22000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf21000, currnet ref number = -1
kalloc.c: kDecRef: decreased pa 0xdf20000, currnet ref number = -1
num of free pages is 56651, 
kalloc.c: kIncRef: increased pa 0xdede000, currnet ref number = 1
kalloc.c: kIncRef: increased pa 0xdedc000, currnet ref number = 1
kalloc.c: kIncRef: increased pa 0xdedb000, currnet ref number = 1
num of free pages after first fork 56584, 
kalloc.c: kDecRef: decreased pa 0xdede000, currnet ref number = 0
kalloc.c: kDecRef: free pa 0xdede000, currnet ref number = 0
kalloc.c: kDecRef: decreased pa 0xdedc000, currnet ref number = 0
kalloc.c: kDecRef: free pa 0xdedc000, currnet ref number = 0
kalloc.c: kDecRef: decreased pa 0xdedb000, currnet ref number = 0
kalloc.c: kDecRef: free pa 0xdedb000, currnet ref number = 0
vm.c: handle COW write fault: PID 3: about to panic on page va 0x0 , *pte= 0xdede825 pysical address=0xdede000
lapicid 1: panic: vm.c: handle COW write fault: pa ref < 1
 8010838c 8010672a 801065cf 0 0 0 0 0 0 0